(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const i of t.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function d(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?t.credentials="include":e.crossorigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function s(e){if(e.ep)return;e.ep=!0;const t=d(e);fetch(e.href,t)}})();document.addEventListener("DOMContentLoaded",()=>{console.log("popup js loaded");const a=document.getElementById("extract"),r=document.getElementById("mark"),d=document.getElementById("clear"),s=document.getElementById("checkReady"),e=document.getElementById("click"),t=document.getElementById("locate"),i=document.getElementById("element-id-input");async function c(o){const[n]=await chrome.tabs.query({active:!0,currentWindow:!0});if(!(n!=null&&n.id)){console.log("no active tab");return}const l={type:"__agentAction__",actionId:Date.now().toString(),...o};console.log("sending message to tab",n.id,l),await chrome.tabs.sendMessage(n.id,l)}a.addEventListener("click",()=>{c({action:"extractContent"})}),r.addEventListener("click",()=>{c({action:"showMarks"})}),d.addEventListener("click",()=>{c({action:"hideMarks"})}),s.addEventListener("click",()=>{c({action:"checkReady"})}),e.addEventListener("click",()=>{const o=i.value;if(o.indexOf(",")!==-1){const[n,l]=o.split(",");c({action:"showClickVisualEffect",x:parseInt((n||"").trim()),y:parseInt((l||"").trim())})}else{const n=parseInt(o);isNaN(n)?console.log("Invalid element ID"):c({action:"click",index:n})}}),t.addEventListener("click",()=>{const o=parseInt(i.value);isNaN(o)?console.log("Invalid element ID"):c({action:"locate",index:o})})});
